import{_ as x,a as h,r as i,o as f,i as g,w as s,e as l,b as r,t as m,f as c}from"./index.e563f3ff.js";import{d as I}from"./debounce.8bb43e45.js";import{l as R}from"./index.f149c03d.js";const M={name:"GroupsAll",components:{},data(){const t=[],e="";return{count:{type:Number},loading:!1,items:t,columns:[{key:"id",sortable:!0},{key:"group",sortable:!0},{key:"status",sortable:!0},{key:"list_source",sortable:!0},{key:"updated_at",sortable:!0}],input:e,filter:e,isDebounceInput:!1,isCustomFilteringFn:!1,filteredCount:t.length,filtered:t,selectedItemsEmitted:[],listPrice:Array,currentPage:1,serverParams:{name:""},options:[],value:["laravel","php"]}},methods:{goToManageSourcePage(t){this.$router.push("source-edit/"+t)},getStatusColor(t){return console.log(t),t==1?"success":"danger"},updateStatus(t){this.loading=!0,this.idGroup=t,console.log(t);let e=this;h.get("/sanctum/csrf-cookie").then(d=>{h.post("/api/groups/update-status",{id_group:e.idGroup}).then(u=>{u.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.fetchRows(),this.loading=!1):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(u.status),this.loading=!1)}).catch(function(u){console.log(d),console.error(u),this.loading=!1})})},addNewOption(t){const e={id:String(this.options.length),text:t,value:t};this.options=[...this.options,e]},deleteChip(t){this.value=this.value.filter(e=>e!==t)},filterExact(t){var e;return this.filter===""?!0:((e=t==null?void 0:t.toString)==null?void 0:e.call(t))===this.filter},updateParams(t){this.serverParams=Object.assign({},this.serverParams,t)},onPageChange(t){console.log(this.currentPage),this.updateParams({page:this.currentPage}),this.fetchRows()},onPerPageChange(t){this.updateParams({perPage:t.currentPerPage}),this.fetchRows()},onSearch(t){this.updateParams({name:t}),this.fetchRows()},updateFilter(t){this.filter=t},debouncedUpdateFilter:I(function(t){this.updateFilter(t)},600),filterPrice:function(t){this.filter=t,this.input=t},fetchRows(){let t=this;this.loading=!0,h.request({method:"post",url:"/api/groups/index",params:this.serverParams,paramsSerializer:e=>R.stringify(e)}).then(e=>{t.items=e.data.groups,t.count=e.data.count,t.options=e.data.categories,t.loading=!1,console.log(this.pages)}).catch(e=>{console.log(e),t.loading=!1})},resetInfoModal(){this.infoModal.title="",this.infoModal.content=""}},computed:{customFilteringFn(){return this.isCustomFilteringFn?this.filterExact:void 0},pages(){return this.perPage&&this.perPage!==0?Math.ceil(this.count/this.perPage):this.count}},watch:{input(t){this.isDebounceInput?this.debouncedUpdateFilter(t):(console.log(t),this.updateParams({name:t}),this.fetchRows(),this.updateFilter(t))},value(t){this.isDebounceInput?this.debouncedUpdateFilter(t):(console.log(t),this.updateParams({category_value:t}),this.fetchRows())},currentPage:function(t){this.updateParams({page:t}),this.fetchRows()}},created(){this.fetchRows()}},N={class:"grid md:grid-cols-2 gap-6 mb-6"},V=["href"],U=["href"],w=c(" 0 "),E=c("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"),A=c("\u0417\u0430\u043F\u0443\u0449\u0435\u043D"),B=c("\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D"),G={colspan:"6"},T={class:"flex justify-center mt-4"},j=c(" Number of filtered items: ");function q(t,e,d,u,a,n){const v=i("va-input"),b=i("VaChip"),p=i("va-button"),P=i("va-pagination"),k=i("va-data-table"),C=i("va-chip"),y=i("va-alert"),F=i("va-card-content"),S=i("va-card");return f(),g(S,null,{default:s(()=>[l(F,null,{default:s(()=>[r("div",N,[l(v,{modelValue:a.input,"onUpdate:modelValue":e[0]||(e[0]=o=>a.input=o),placeholder:"Filter...",class:"w-full"},null,8,["modelValue"])]),l(k,{items:a.items,columns:a.columns,filter:a.filter,"filter-method":n.customFilteringFn,onFiltered:e[2]||(e[2]=o=>a.filteredCount=o.items.length),loading:a.loading,selectable:"","selected-color":"warning",onSelectionChange:e[3]||(e[3]=o=>a.selectedItemsEmitted=o.currentSelectedItems)},{"cell(id)":s(({rowData:o})=>[r("a",{target:"_blank",href:"edit/"+o.id},m(o.id),9,V)]),"cell(group)":s(({rowData:o})=>[r("a",{target:"_blank",href:o.url_group},m(o.group),9,U)]),"cell(list_source)":s(({rowData:o})=>[l(b,{color:t.success,class:"mr-6 mb-2"},{default:s(()=>[w]),_:1},8,["color"]),l(p,{color:t.primary,onClick:_=>n.goToManageSourcePage(o.id)},{default:s(()=>[E]),_:2},1032,["color","onClick"])]),"cell(status)":s(({rowData:o})=>[o.is_start==1?(f(),g(p,{key:0,color:n.getStatusColor(o.is_start),onClick:_=>n.updateStatus(o.id)},{default:s(()=>[A]),_:2},1032,["color","onClick"])):(f(),g(p,{key:1,color:n.getStatusColor(o.is_start),onClick:_=>n.updateStatus(o.id)},{default:s(()=>[B]),_:2},1032,["color","onClick"]))]),bodyAppend:s(()=>[r("tr",null,[r("td",G,[r("div",T,[l(P,{modelValue:a.currentPage,"onUpdate:modelValue":e[1]||(e[1]=o=>a.currentPage=o),pages:n.pages},null,8,["modelValue","pages"])])])])]),_:1},8,["items","columns","filter","filter-method","loading"]),l(y,{class:"!mt-6",color:"info",outline:""},{default:s(()=>[j,l(C,null,{default:s(()=>[c(m(a.count),1)]),_:1})]),_:1})]),_:1})]),_:1})}var J=x(M,[["render",q],["__scopeId","data-v-b821faae"]]);export{J as default};
