import{_ as k,a as C,r as l,o as d,i as h,w as i,e as o,b as n,c as w,j as x,f as p,t as u,F as N}from"./index.d42abe3b.js";import{d as R}from"./debounce.06ab650c.js";import{l as V}from"./index.a54f8ded.js";const I={name:"StockAll",components:{},data(){const e=[],t="";return{count:{type:Number},perPage:{type:Number},loading:!1,items:e,columns:[{key:"title",sortable:!0},{key:"created_at",sortable:!0}],input:t,filter:t,isDebounceInput:!1,isCustomFilteringFn:!1,filteredCount:e.length,filtered:e,selectedItemsEmitted:[],listPrice:Array,currentPage:1,serverParams:{name:""},options:[],value:["laravel","php"]}},methods:{addNewOption(e){const t={id:String(this.options.length),text:e,value:e};this.options=[...this.options,t]},deleteChip(e){this.value=this.value.filter(t=>t!==e)},filterExact(e){var t;return this.filter===""?!0:((t=e==null?void 0:e.toString)==null?void 0:t.call(e))===this.filter},updateParams(e){this.serverParams=Object.assign({},this.serverParams,e)},onPageChange(e){console.log(this.currentPage),this.updateParams({page:this.currentPage}),this.fetchRows()},onPerPageChange(e){this.updateParams({perPage:e.currentPerPage}),this.fetchRows()},onSearch(e){this.updateParams({name:e}),this.fetchRows()},updateFilter(e){this.filter=e},debouncedUpdateFilter:R(function(e){this.updateFilter(e)},600),filterPrice:function(e){this.filter=e,this.input=e},fetchRows(){let e=this;this.loading=!0,C.request({method:"post",url:"/api/post/rss-habr-all",params:this.serverParams,paramsSerializer:t=>V.stringify(t)}).then(t=>{e.items=t.data.posts,e.count=t.data.count,e.perPage=t.data.perPage,e.options=t.data.categories,e.loading=!1,console.log(this.pages)}).catch(t=>{console.log(t),e.loading=!1})},resetInfoModal(){this.infoModal.title="",this.infoModal.content=""}},computed:{customFilteringFn(){return this.isCustomFilteringFn?this.filterExact:void 0},pages(){return this.perPage&&this.perPage!==0?Math.ceil(this.count/this.perPage):this.count}},watch:{input(e){this.isDebounceInput?this.debouncedUpdateFilter(e):(console.log(e),this.updateParams({name:e}),this.fetchRows(),this.updateFilter(e))},value(e){this.isDebounceInput?this.debouncedUpdateFilter(e):(console.log(e),this.updateParams({category_value:e}),this.fetchRows())},currentPage:function(e){this.updateParams({page:e}),this.fetchRows()}},created(){this.updateParams({publish_habr:!0}),this.fetchRows()}},S={class:"grid md:grid-cols-2 gap-6 mb-6"},U={class:"grid md:grid-cols-2 gap-6 mb-6"},E=["href"],B={colspan:"6"},M={class:"flex justify-center mt-4"},j=p(" Number of filtered items: ");function A(e,t,f,D,s,r){const g=l("va-input"),m=l("va-chip"),_=l("va-select"),v=l("va-pagination"),b=l("va-data-table"),P=l("va-alert"),y=l("va-card-content"),F=l("va-card");return d(),h(F,null,{default:i(()=>[o(y,null,{default:i(()=>[n("div",S,[o(g,{modelValue:s.input,"onUpdate:modelValue":t[0]||(t[0]=a=>s.input=a),placeholder:"Filter...",class:"w-full"},null,8,["modelValue"])]),n("div",U,[o(_,{modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=a=>s.value=a),label:"Removable chips",options:s.options,onCreateNew:r.addNewOption,"track-by":a=>a,"allow-create":"unique",multiple:""},{content:i(({value:a})=>[(d(!0),w(N,null,x(a,c=>(d(),h(m,{key:c,size:"small",class:"mr-1 my-1",closeable:"","onUpdate:modelValue":q=>r.deleteChip(c)},{default:i(()=>[p(u(c),1)]),_:2},1032,["onUpdate:modelValue"]))),128))]),_:1},8,["modelValue","options","onCreateNew","track-by"])]),o(b,{items:s.items,columns:s.columns,filter:s.filter,"filter-method":r.customFilteringFn,onFiltered:t[3]||(t[3]=a=>s.filteredCount=a.items.length),loading:s.loading,selectable:"","selected-color":"warning",onSelectionChange:t[4]||(t[4]=a=>s.selectedItemsEmitted=a.currentSelectedItems)},{"cell(title)":i(({rowData:a})=>[n("a",{class:"link",target:"_blank",href:a.link},u(a.title),9,E)]),bodyAppend:i(()=>[n("tr",null,[n("td",B,[n("div",M,[o(v,{modelValue:s.currentPage,"onUpdate:modelValue":t[2]||(t[2]=a=>s.currentPage=a),pages:r.pages},null,8,["modelValue","pages"])])])])]),_:1},8,["items","columns","filter","filter-method","loading"]),o(P,{class:"!mt-6",color:"info",outline:""},{default:i(()=>[j,o(m,null,{default:i(()=>[p(u(s.count),1)]),_:1})]),_:1})]),_:1})]),_:1})}var T=k(I,[["render",A],["__scopeId","data-v-8cec320c"]]);export{T as default};
