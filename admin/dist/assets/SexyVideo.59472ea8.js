import{_ as w,a as c,r as d,o as g,i as x,w as l,e as a,b as i,t as f,c as p,f as u}from"./index.0fc0052e.js";import{d as I}from"./debounce.e38d938a.js";import{l as R}from"./index.34883dac.js";const F={name:"StockAll",components:{},data(){const e=[],t="";return{count:{type:Number},loading:!1,items:e,columns:[{key:"id",sortable:!0},{key:"attachments",sortable:!0},{key:"count_attachments",sortable:!0},{key:"text",sortable:!0},{key:"created_at",sortable:!0}],input:t,filter:t,isDebounceInput:!1,isCustomFilteringFn:!1,filteredCount:e.length,filtered:e,selectedItemsEmitted:[],listPrice:Array,currentPage:1,serverParams:{name:""},options:[],value:["laravel","php"]}},methods:{getOneImage(e){return Array.from(Object.entries(e),([s,h])=>h)[0]},getCountAttachments(e){var s=Array.from(Object.entries(e),([h,o])=>o).filter(function(){return!0}).length;return s},addNewOption(e){const t={id:String(this.options.length),text:e,value:e};this.options=[...this.options,t]},deleteChip(e){this.value=this.value.filter(t=>t!==e)},filterExact(e){var t;return this.filter===""?!0:((t=e==null?void 0:e.toString)==null?void 0:t.call(e))===this.filter},updateParams(e){this.serverParams=Object.assign({},this.serverParams,e)},onPageChange(e){console.log(this.currentPage),this.updateParams({page:this.currentPage}),this.fetchRows()},onPerPageChange(e){this.updateParams({perPage:e.currentPerPage}),this.fetchRows()},onSearch(e){this.updateParams({name:e}),this.fetchRows()},updateFilter(e){this.filter=e},debouncedUpdateFilter:I(function(e){this.updateFilter(e)},600),filterPrice:function(e){this.filter=e,this.input=e},fetchRows(){let e=this;this.loading=!0,c.request({method:"post",url:"/api/telegramm/sexy-video-all",params:this.serverParams,paramsSerializer:t=>R.stringify(t)}).then(t=>{e.items=t.data.posts,e.count=t.data.count,e.options=t.data.categories,e.loading=!1,console.log(this.pages)}).catch(t=>{console.log(t),e.loading=!1})},resetInfoModal(){this.infoModal.title="",this.infoModal.content=""},hidden:function(e,t){let s=this;this.loading=!0,console.log(s.selectedItemsEmitted),c.get("/sanctum/csrf-cookie").then(h=>{c.post("/api/post/post-hidden",{selRows:s.selectedItemsEmitted}).then(o=>{o.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.$vaToast.init({message:"\u0417\u0430\u043F\u0438\u0441\u044C \u0441\u043A\u0440\u044B\u0442\u0430",color:"danger"}),this.fetchRows(),s.loading=!1):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(o.status),s.loading=!1)})})},publish:function(e,t){let s=this;this.loading=!0,console.log(s.selectedItemsEmitted),c.get("/sanctum/csrf-cookie").then(h=>{c.post("/api/telegramm/sexy-video-publish",{selRows:s.selectedItemsEmitted}).then(o=>{o.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.$vaToast.init({message:"\u0417\u0430\u043F\u0438\u0441\u044C \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0430 \u0432 \u0442\u0435\u043B\u0435\u0433\u0440\u0430\u043C\u043C",color:"success"}),this.fetchRows(),s.loading=!1):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(o.status),s.loading=!1)})})},deletePost:function(e,t){let s=this;this.loading=!0,console.log(s.selectedItemsEmitted),c.get("/sanctum/csrf-cookie").then(h=>{c.post("/api/post/delete",{selRows:s.selectedItemsEmitted}).then(o=>{o.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.$vaToast.init({message:"\u0417\u0430\u043F\u0438\u0441\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u044B",color:"success"}),this.fetchRows(),s.loading=!1):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(o.status),s.loading=!1)})})},addQueue:function(e,t){let s=this;this.loading=!0,console.log(s.selectedItemsEmitted),c.get("/sanctum/csrf-cookie").then(h=>{c.post("/api/queue/set",{selRows:s.selectedItemsEmitted}).then(o=>{o.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.$vaToast.init({message:"\u0417\u0430\u043F\u0438\u0441\u044C \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0430 \u0432 \u043E\u0447\u0435\u0440\u0435\u0434\u044C",color:"success"}),this.fetchRows(),s.loading=!1):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(o.status),s.loading=!1)})})}},computed:{customFilteringFn(){return this.isCustomFilteringFn?this.filterExact:void 0},pages(){return this.perPage&&this.perPage!==0?Math.ceil(this.count/this.perPage):this.count}},watch:{input(e){this.isDebounceInput?this.debouncedUpdateFilter(e):(console.log(e),this.updateParams({name:e}),this.fetchRows(),this.updateFilter(e))},value(e){this.isDebounceInput?this.debouncedUpdateFilter(e):(console.log(e),this.updateParams({category_value:e}),this.fetchRows())},currentPage:function(e){this.updateParams({page:e}),this.fetchRows()}},created(){this.fetchRows()}},E={class:"row"},S={class:"col"},A=u(" \u041E\u043F\u0443\u0431\u043B\u0438\u043A\u043E\u0432\u0430\u0442\u044C \u0432 \u0422\u0435\u043B\u0435\u0433\u0440\u0430\u043C\u043C "),N={class:"col"},O=u(" \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u043E\u0447\u0435\u0440\u0435\u0434\u044C "),T={class:"col"},j=u(" \u0421\u043A\u0440\u044B\u0442\u044C "),B={class:"col"},M=u(" \u0423\u0434\u0430\u043B\u0438\u0442\u044C "),U={key:0},q=["href"],z={key:1},Q=["href"],V={colspan:"6"},D={class:"flex justify-center mt-4"},G=u(" Number of filtered items: ");function H(e,t,s,h,o,r){const m=d("va-button"),_=d("va-image"),v=d("va-pagination"),k=d("va-data-table"),b=d("va-chip"),P=d("va-alert"),y=d("va-card-content"),C=d("va-card");return g(),x(C,null,{default:l(()=>[a(y,null,{default:l(()=>[i("div",E,[i("div",S,[a(m,{onClick:r.publish},{default:l(()=>[A]),_:1},8,["onClick"])]),i("div",N,[a(m,{onClick:r.addQueue},{default:l(()=>[O]),_:1},8,["onClick"])]),i("div",T,[a(m,{color:"danger",onClick:r.hidden},{default:l(()=>[j]),_:1},8,["onClick"])]),i("div",B,[a(m,{color:"danger",onClick:r.deletePost},{default:l(()=>[M]),_:1},8,["onClick"])])]),a(k,{items:o.items,columns:o.columns,filter:o.filter,"filter-method":r.customFilteringFn,onFiltered:t[1]||(t[1]=n=>o.filteredCount=n.items.length),loading:o.loading,selectable:"","selected-color":"warning",onSelectionChange:t[2]||(t[2]=n=>o.selectedItemsEmitted=n.currentSelectedItems)},{"cell(attachments)":l(({rowData:n})=>[a(_,{src:r.getOneImage(n.attachments),sizes:150},null,8,["src"])]),"cell(count_attachments)":l(({rowData:n})=>[i("span",null,f(r.getCountAttachments(n.attachments)),1)]),"cell(text)":l(({rowData:n})=>[n.text==""?(g(),p("div",U,[i("a",{class:"link",target:"_blank",href:n.link},"\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C",8,q)])):(g(),p("div",z,[i("a",{class:"link",target:"_blank",href:n.link},f(n.text),9,Q)]))]),bodyAppend:l(()=>[i("tr",null,[i("td",V,[i("div",D,[a(v,{modelValue:o.currentPage,"onUpdate:modelValue":t[0]||(t[0]=n=>o.currentPage=n),pages:r.pages},null,8,["modelValue","pages"])])])])]),_:1},8,["items","columns","filter","filter-method","loading"]),a(P,{class:"!mt-6",color:"info",outline:""},{default:l(()=>[G,a(b,null,{default:l(()=>[u(f(o.count),1)]),_:1})]),_:1})]),_:1})]),_:1})}var W=w(F,[["render",H]]);export{W as default};
