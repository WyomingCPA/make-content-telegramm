import{_ as P,a as u,r as n,o as _,c as w,e as l,w as s,F,b as i,t as f,i as b,f as d}from"./index.8da36922.js";import{l as k}from"./index.77d6e4d4.js";const N={name:"TumblrReblogAnime",components:{},data(){return{nameSource:"",urlSource:"",ownerId:0,columns:[{key:"id",sortable:!0},{key:"name",sortable:!0},{key:"is_parce",sortable:!0},{key:"updated_at",sortable:!0},{key:"actions",width:50}],items:[],loading:!1,serverParams:{name_source:"",url_source:"",owner_id:""},value:0}},methods:{getStatusColor(o){return console.log(o),o==1?"success":"danger"},updateParams(o){this.serverParams=Object.assign({},this.serverParams,o)},deleteSource(o){let e=this;this.loading=!0,console.log(e.selectedItemsEmitted),u.get("/sanctum/csrf-cookie").then(m=>{u.post("/api/groups/delete-source",{id_source:o}).then(r=>{r.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.$vaToast.init({message:"\u0418\u0441\u0442\u043E\u0447\u043D\u0438\u043A \u0443\u0434\u0430\u043B\u0435\u043D",color:"success"}),this.getData(),e.loading=!1):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(r.status),e.loading=!1)})})},updateStatus(o){this.loading=!0,this.idSource=o,console.log(o);let e=this;u.get("/sanctum/csrf-cookie").then(m=>{u.post("/api/groups/update-parce-groups",{id_source:e.idSource}).then(r=>{r.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.getData(),this.loading=!1):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(r.status),this.loading=!1)}).catch(function(r){console.log(m),console.error(r),this.loading=!1})})},createSource(){this.updateParams({name_source:this.nameSource,url_source:this.urlSource,owner_id:this.ownerId,id_group:this.$route.params.id});let o=this;this.loading=!0,u.request({method:"post",url:"/api/groups/add-source",params:this.serverParams,paramsSerializer:e=>k.stringify(e)}).then(e=>{e.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.$vaToast.init({message:"\u0418\u0441\u0442\u043E\u0447\u043D\u0438\u043A \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D",color:"success"}),o.loading=!1,this.getData()):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(e.status),o.loading=!1)}).catch(e=>{console.log(e),o.loading=!1})},getData(){let o=this;this.loading=!0,this.updateParams({id_group:this.$route.params.id}),u.request({method:"post",url:"/api/groups/get-source",params:this.serverParams,paramsSerializer:e=>k.stringify(e)}).then(e=>{o.items=e.data.source,o.count=e.data.count,o.loading=!1,console.log(this.pages)}).catch(e=>{console.log(e),o.loading=!1})}},created(){this.getData()}},U={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 items-end"},B={class:"row"},T={class:"col mt-2 ml-2"},E=d("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"),j=["href"],q=["href"],z=d("\u0417\u0430\u043F\u0443\u0449\u0435\u043D"),A=d("\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D"),O=d("\u0423\u0434\u0430\u043B\u0438\u0442\u044C"),D={colspan:"6"},M={class:"flex justify-center mt-4"},R=d(" Number of filtered items: ");function G(o,e,m,r,a,c){const p=n("VaInput"),g=n("va-button"),h=n("va-card-content"),v=n("va-card"),V=n("va-pagination"),C=n("va-data-table"),y=n("va-chip"),I=n("va-alert");return _(),w(F,null,[l(v,null,{default:s(()=>[l(h,null,{default:s(()=>[i("div",U,[l(p,{modelValue:a.nameSource,"onUpdate:modelValue":e[0]||(e[0]=t=>a.nameSource=t),placeholder:"",label:"Name Source",class:"mr-2"},null,8,["modelValue"]),l(p,{modelValue:a.urlSource,"onUpdate:modelValue":e[1]||(e[1]=t=>a.urlSource=t),placeholder:"",label:"Url Source",class:"mr-2"},null,8,["modelValue"]),l(p,{modelValue:a.ownerId,"onUpdate:modelValue":e[2]||(e[2]=t=>a.ownerId=t),placeholder:"",label:"Owner ID",class:"mr-2"},null,8,["modelValue"])]),i("div",B,[i("div",T,[l(g,{color:"success",onClick:e[3]||(e[3]=t=>c.createSource())},{default:s(()=>[E]),_:1})])])]),_:1})]),_:1}),l(v,null,{default:s(()=>[l(h,null,{default:s(()=>[l(C,{items:a.items,columns:a.columns,filter:o.filter,"filter-method":o.customFilteringFn,onFiltered:e[5]||(e[5]=t=>o.filteredCount=t.items.length),loading:a.loading,selectable:"","selected-color":"warning",onSelectionChange:e[6]||(e[6]=t=>o.selectedItemsEmitted=t.currentSelectedItems)},{"cell(id)":s(({rowData:t})=>[i("a",{target:"_blank",href:"edit/"+t.id},f(t.id),9,j)]),"cell(name)":s(({rowData:t})=>[i("a",{target:"_blank",href:t.url_source},f(t.name),9,q)]),"cell(is_parce)":s(({rowData:t})=>[t.is_parce==1?(_(),b(g,{key:0,color:c.getStatusColor(t.is_parce),onClick:S=>c.updateStatus(t.id)},{default:s(()=>[z]),_:2},1032,["color","onClick"])):(_(),b(g,{key:1,color:c.getStatusColor(t.is_parce),onClick:S=>c.updateStatus(t.id)},{default:s(()=>[A]),_:2},1032,["color","onClick"]))]),"cell(actions)":s(({rowData:t})=>[l(g,{color:"danger",onClick:S=>c.deleteSource(t.id)},{default:s(()=>[O]),_:2},1032,["onClick"])]),bodyAppend:s(()=>[i("tr",null,[i("td",D,[i("div",M,[l(V,{modelValue:o.currentPage,"onUpdate:modelValue":e[4]||(e[4]=t=>o.currentPage=t),pages:o.pages},null,8,["modelValue","pages"])])])])]),_:1},8,["items","columns","filter","filter-method","loading"]),l(I,{class:"!mt-6",color:"info",outline:""},{default:s(()=>[R,l(y,null,{default:s(()=>[d(f(o.count),1)]),_:1})]),_:1})]),_:1})]),_:1})],64)}var K=P(N,[["render",G]]);export{K as default};
