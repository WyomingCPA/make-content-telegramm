import{_ as C,a as d,r as l,o as u,i as I,w as i,e as r,b as a,t as h,c as g,f as m}from"./index.d8dce5f2.js";import{d as S}from"./debounce.35bc5cf9.js";import{l as w}from"./index.a7ab9039.js";const R={name:"StockAll",components:{},data(){const t=[],e="";return{count:{type:Number},loading:!1,items:t,columns:[{key:"id",sortable:!0},{key:"attachments",sortable:!0},{key:"count_attachments",sortable:!0},{key:"text",sortable:!0},{key:"updated_at",sortable:!0}],input:e,filter:e,isDebounceInput:!1,isCustomFilteringFn:!1,filteredCount:t.length,filtered:t,selectedItemsEmitted:[],listPrice:Array,currentPage:1,serverParams:{name:""},options:[],value:["laravel","php"]}},methods:{getOneImage(t){let e=t.toString().replace("[","").replace("]","").split(",").map(String);return console.log(e[0]),e[0]},getCountAttachments(t){let e=t.toString().replace("[","").replace("]","").split(",").map(String);return console.log(e.length),e.length},addNewOption(t){const e={id:String(this.options.length),text:t,value:t};this.options=[...this.options,e]},deleteChip(t){this.value=this.value.filter(e=>e!==t)},filterExact(t){var e;return this.filter===""?!0:((e=t==null?void 0:t.toString)==null?void 0:e.call(t))===this.filter},updateParams(t){this.serverParams=Object.assign({},this.serverParams,t)},onPageChange(t){console.log(this.currentPage),this.updateParams({page:this.currentPage}),this.fetchRows()},onPerPageChange(t){this.updateParams({perPage:t.currentPerPage}),this.fetchRows()},onSearch(t){this.updateParams({name:t}),this.fetchRows()},updateFilter(t){this.filter=t},debouncedUpdateFilter:S(function(t){this.updateFilter(t)},600),filterPrice:function(t){this.filter=t,this.input=t},fetchRows(){let t=this;this.loading=!0,d.request({method:"post",url:"/api/post/vk-sexy-release",params:this.serverParams,paramsSerializer:e=>w.stringify(e)}).then(e=>{t.items=e.data.posts,t.count=e.data.count,t.options=e.data.categories,t.loading=!1,console.log(this.pages)}).catch(e=>{console.log(e),t.loading=!1})},resetInfoModal(){this.infoModal.title="",this.infoModal.content=""},hidden:function(t,e){let n=this;this.loading=!0,console.log(n.selectedItemsEmitted),d.get("/sanctum/csrf-cookie").then(p=>{d.post("/api/post/post-hidden",{selRows:n.selectedItemsEmitted}).then(s=>{s.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.$vaToast.init({message:"\u0417\u0430\u043F\u0438\u0441\u044C \u0441\u043A\u0440\u044B\u0442\u0430",color:"danger"}),this.fetchRows(),n.loading=!1):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(s.status),n.loading=!1)})})},publishAnimeTumbrl:function(t,e){let n=this;this.loading=!0,console.log(n.selectedItemsEmitted),d.get("/sanctum/csrf-cookie").then(p=>{d.post("/api/post/tumbrl-anime-publish",{selRows:n.selectedItemsEmitted}).then(s=>{s.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.$vaToast.init({message:"\u0417\u0430\u043F\u0438\u0441\u044C \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0430 \u0432 Tumbler",color:"success"}),this.fetchRows(),n.loading=!1):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(s.status),n.loading=!1)})})}},computed:{customFilteringFn(){return this.isCustomFilteringFn?this.filterExact:void 0},pages(){return this.perPage&&this.perPage!==0?Math.ceil(this.count/this.perPage):this.count}},watch:{input(t){this.isDebounceInput?this.debouncedUpdateFilter(t):(console.log(t),this.updateParams({name:t}),this.fetchRows(),this.updateFilter(t))},value(t){this.isDebounceInput?this.debouncedUpdateFilter(t):(console.log(t),this.updateParams({category_value:t}),this.fetchRows())},currentPage:function(t){this.updateParams({page:t}),this.fetchRows()}},created(){this.fetchRows()}},E={class:"grid md:grid-cols-2 gap-6 mb-6"},A={class:"row"},N={class:"col"},T=m(" \u0421\u043A\u0440\u044B\u0442\u044C "),U={key:0},V=["href"],B={key:1},M=["href"],O={colspan:"6"},j={class:"flex justify-center mt-4"},z=m(" Number of filtered items: ");function q(t,e,n,p,s,c){const f=l("va-input"),_=l("va-button"),v=l("va-image"),b=l("va-pagination"),P=l("va-data-table"),k=l("va-chip"),y=l("va-alert"),x=l("va-card-content"),F=l("va-card");return u(),I(F,null,{default:i(()=>[r(x,null,{default:i(()=>[a("div",E,[r(f,{modelValue:s.input,"onUpdate:modelValue":e[0]||(e[0]=o=>s.input=o),placeholder:"Filter...",class:"w-full"},null,8,["modelValue"])]),a("div",A,[a("div",N,[r(_,{color:"danger",onClick:c.hidden},{default:i(()=>[T]),_:1},8,["onClick"])])]),r(P,{items:s.items,columns:s.columns,filter:s.filter,"filter-method":c.customFilteringFn,onFiltered:e[2]||(e[2]=o=>s.filteredCount=o.items.length),loading:s.loading,selectable:"","selected-color":"warning",onSelectionChange:e[3]||(e[3]=o=>s.selectedItemsEmitted=o.currentSelectedItems)},{"cell(attachments)":i(({rowData:o})=>[r(v,{src:c.getOneImage(o.attachments),sizes:100},null,8,["src"])]),"cell(count_attachments)":i(({rowData:o})=>[a("span",null,h(c.getCountAttachments(o.attachments)),1)]),"cell(text)":i(({rowData:o})=>[o.text==""?(u(),g("div",U,[a("a",{class:"link",target:"_blank",href:"https://vk.com/"+o.link},"\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C",8,V)])):(u(),g("div",B,[a("a",{class:"link",target:"_blank",href:"https://vk.com/"+o.link},h(o.text),9,M)]))]),bodyAppend:i(()=>[a("tr",null,[a("td",O,[a("div",j,[r(b,{modelValue:s.currentPage,"onUpdate:modelValue":e[1]||(e[1]=o=>s.currentPage=o),pages:c.pages},null,8,["modelValue","pages"])])])])]),_:1},8,["items","columns","filter","filter-method","loading"]),r(y,{class:"!mt-6",color:"info",outline:""},{default:i(()=>[z,r(k,null,{default:i(()=>[m(h(s.count),1)]),_:1})]),_:1})]),_:1})]),_:1})}var J=C(R,[["render",q]]);export{J as default};
